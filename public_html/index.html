<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <title> Student Registration Form </title>
        <link rel="stylesheet" href="style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="http://login2explore.com/jpdb/resources/js/0.0.4/jpdb-commons.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="title">Student Registration</div>
            <form id="stuForm" method="post">
                <div class="form-group">
                    <span><label for="name">Student Name</label><label id="stuNameMsg"></label></span>
                    <input type="text" class="form-control" name="name" id="name" placeholder="Student Name is Required Value" required>
                </div>
                <div class="form-group">
                    <label for="stuRollno">Roll No</label>
                    <input type="text" class="form-control" name="stuRollno" id="stuRollno" placeholder="Student Roll No is Required Value" required>
                </div>
                <div class="form-group">
                    <label for="stuClass">Class</label>
                    <input type="text" class="form-control" name="stuClass" id="stuClass" placeholder="Student Class is Required Value" required>
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" class="form-control" name="dob" id="dob" required>
                </div>
                <div class="form-group">
                    <label for="enroll_date">Enrollment Date</label>
                    <input type="date" class="form-control" name="enroll_date" id="enroll_date" required>
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" class="form-control" name="address" id="address" placeholder="Student Address is Required Value" required>
                </div>
                <input type="button" class="btn" id="stuSave" value="save" onclick="saveStudent();">
            </form>
        </div>
        <script>

            function validateAndGetFormateData() {
                var stuName = $("#name").val();
                if (stuName === "") {
                    alert("Student Name is Required Value");
                    $("#name").focus();
                    return "";
                }

                var stuRollno = $("#stuRollno").val();
                if (stuRollno==="") {
                    alert("Student Roll no is Required Value");
                    $("#stuRollno").focus();
                    return "";
                }

                var stuClass = $("#stuClass").val();
                if (stuClass === "") {
                    alert("Student's Class is Required Value");
                    $("#stuClass").focus();
                    return "";
                }

                var stuDOB = $("#dob").val();
                if (stuDOB === "") {
                    alert("Student's Date of Birth is Required Value");
                    $("#dob").focus();
                    return "";
                }

                var stuEnroll_Date = $("#enroll_date").val();
                if (stuEnroll_Date === "") {
                    alert("Student Enroll Date is Required Value");
                    $("#enroll_date").focus();
                    return "";
                }

                var stuAddress = $("#address").val();
                if (stuAddress === "") {
                    alert("Student Address is Required Value");
                    $("#address").focus();
                    return "";
                }

                var jsonStrObj = {
                    Full_Name: stuName,
                    Rollno: stuRollno,
                    Class: stuClass,
                    Date_of_Birth: stuDOB,
                    Enrollment_Date: stuEnroll_Date,
                    Address: stuAddress
                };
                console.log("Hello");

                return JSON.stringify(jsonStrObj);
            }

            function resetForm() {
                $("#name").val("");
                $("#rollno").val("");
                $("#stuClass").val("");
                $("#dob").val("");
                $("#enroll_date").val("");
                $("#address").val("");
                $("#name").focus();
            }

            function saveStudent() {
                var jsonStr = validateAndGetFormateData();
                if (jsonStr === "") {
                    console.log("Hello");
                    return;
                }

                var putReqStr = createPUTRequest("90933111|-31949318232646512|90951200", jsonStr, "School-DB", "Student-Table");
                alert(putReqStr);
                jQuery.ajaxSetup({async: false});
                var resultObj = executeCommandAtGivenBaseUrl(putReqStr, "http://api.login2explore.com:5577", "/api/iml");
                alert(JSON.stringify(resultObj));
                jQuery.ajaxSetup({async: true});

                resetForm();
            }
        </script>
    </body>
</html>