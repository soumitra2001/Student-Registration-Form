<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <title> Student Registration Form </title>
        <link rel="stylesheet" href="style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="http://login2explore.com/jpdb/resources/js/0.0.4/jpdb-commons.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="title">Student Registration</div>
                <form action="" method="post">
                    <div class="user-details">
                        <div class="input-box">
                            <label for="name">Full Name</label>
                            <input type="text" name="name" placeholder="Enter your name" required>
                        </div>
                        <div class="input-box">
                            <label for="rollno">Roll No</label>
                            <input type="text" name="rollno" placeholder="Enter your rollno" required>
                        </div>
                        <div class="input-box">
                            <label for="stuClass">Class</label>
                            <input type="text" name="stuClass" placeholder="Enter your class" required>
                        </div>
                        <div class="input-box">
                            <label for="dob">Date of Birth</label>
                            <input type="date" name="dob" required>
                        </div>
                        <div class="input-box">
                            <label for="enroll_date">Enrollment Date</label>
                            <input type="date" name="enroll_date" required>
                        </div>
                        <div class="input-box">
                            <label for="address">Address</label>
                            <input type="text" name="address" placeholder="Enter your address" required>
                        </div>
                    </div>
                    <!--                    <div class="gender-details">
                                            <input type="radio" name="gender" id="dot-1">
                                            <input type="radio" name="gender" id="dot-2">
                                            <label class="gender-title">Gender</label>
                                            <div class="category">
                                                <label for="dot-1">
                                                    <label class="dot one"></label>
                                                    <label>Male</label>
                                                </label>
                                                <label for="dot-2">
                                                    <label class="dot two"></label>
                                                    <label>Female</label>
                                                </label>
                                            </div>
                                        </div>-->
                    <div class="button">
                        <input type="submit" value="save" onclick="saveStudent();">
                    </div>
                </form>
        </div>
        <script>

            function validateAndGetFormateData() {
                var stuName = $("#name").val();
                if (stuName === "") {
                    alert("Student Name is Required Value");
                    $("#name").focus();
                    return "";
                }

                var stuRollno = $("#rollno").val();
                if (stuRollno === "") {
                    alert("Student Roll no is Required Value");
                    $("#rollno").focus();
                    return "";
                }

                var stuClass = $("#stuClass").val();
                if (stuClass === "") {
                    alert("Student's Class is Required Value");
                    $("#stuClass").focus();
                    return "";
                }

                var stuDOB = $("#dob").val();
                if (stuDOB === "") {
                    alert("Student's Date of Birth is Required Value");
                    $("#dob").focus();
                    return "";
                }

                var stuEnroll_Date = $("#enroll_date").val();
                if (stuEnroll_Date === "") {
                    alert("Student Enroll Date is Required Value");
                    $("#enroll_date").focus();
                    return "";
                }

                var stuAddress = $("#address").val();
                if (stuAddress === "") {
                    alert("Student Address is Required Value");
                    $("#address").focus();
                    return "";
                }

                var jsonStrObj = {
                    Full_Name: stuName,
                    Rollno: stuRollno,
                    Class: stuClass,
                    Date_of_Birth: stuDOB,
                    Enrollment_Date: stuEnroll_Date,
                    Address: stuAddress
                };
                console.log("Hello");

                return JSON.stringify(jsonStrObj);
            }

            function resetForm() {
                $("#name").val("");
                $("#rollno").val("");
                $("#stuClass").val("");
                $("#dob").val("");
                $("#enroll_date").val("");
                $("#address").val("");
                $("#name").focus();
            }

            function saveStudent() {
                var jsonStr = validateAndGetFormateData();
                if (jsonStr === "") {
                    console.log("Hello");
                    return;
                }

                var putReqStr = createPUTRequest("90933111|-31949318232646512|90951200", jsonStr, "School-DB", "Student-Table");
                alert(putReqStr);
                jQuery.ajaxSetup({async: false});
                var resultObj = executeCommandAtGivenBaseUrl(putReqStr, "http://api.login2explore.com:5577", "/api/iml");
                alert(JSON.stringify(resultObj));
                jQuery.ajaxSetup({async: true});

                resetForm();
            }
        </script>
    </body>
</html>